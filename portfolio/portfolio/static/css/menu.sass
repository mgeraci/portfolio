$circle-size: 90px
$menu-border-size: 3px
$menu-padding: 23px
$mobile-header-height: 90px
$mobile-header-padding: 20px
$mobile-icon-size: 12px

@mixin circle-style($size)
  display: inline-block
  width: $size
  height: $size
  border-radius: 50%
  background: $cream
  color: $green
  text-align: center
  text-decoration: none

nav
  @include clearfix

.nav-desktop
  @include clearfix
  @include content-sizing
  padding-top: 20px
  padding-bottom: 20px
  max-width: $menu-max-width

  @media (max-width: $menu-breakpoint - 1)
    display: none

  li
    float: left
    width: 100% / $menu-items
    text-align: center

    @media (min-width: $menu-breakpoint)
      text-align: center

      a
        @include circle-style($circle-size)
        padding-top: $menu-padding
        @include transition-property(background, color)
        @include transition-duration(75ms)
        @include transition-timing-function(linear)
        @include type(22px, 24px)

        &:hover,
        &:active,
        &.active
          background: $green
          padding-top: $menu-padding - $menu-border-size
          border: $menu-border-size solid $cream
          color: $cream

.nav-mobile
  @include clearfix
  display: none

  @media (max-width: $menu-breakpoint - 1)
    display: block

  // showing menu state
  &--has-menu
    .nav-mobile-menu
      height: 254px

    .nav-mobile-menu-trigger-icon
      border: 0
      @include triangle($mobile-icon-size, $text, up)

  &-header
    display: block
    height: $mobile-header-height

  &-title
    float: left
    margin-top: $mobile-header-padding
    margin-left: $body-mobile-gutter
    @include circle-style($mobile-header-height - $mobile-header-padding * 2)
    @include type(20px, 54px)

  &-menu-trigger
    @include bare-button
    position: relative
    float: right
    margin-right: $body-mobile-gutter
    @include ellipsis
    max-width: 230px
    padding-right: 20px // for icon
    height: 100%
    text-align: right
    line-height: $mobile-header-height

    &-icon
      position: absolute
      top: 50%
      right: 0
      margin-top: $mobile-icon-size * -0.3
      @include triangle($mobile-icon-size, $text, down)

  &-menu
    position: absolute
    overflow: hidden
    z-index: 2
    top: $mobile-header-height
    left: 0
    float: left
    width: 100%
    background: rgba(#000, 0.7)

    @include transition(height 100ms ease-in-out)
    height: 0

    $decoration-color: rgba(#000, 0.1)

    &::before,
    &::after
      content: ""
      display: block
      position: absolute
      z-index: 1
      left: 0
      width: 100%

    &::before
      top: 0
      height: 7px
      @include linear-gradient($decoration-color, rgba(#000, 0))
      background-color: transparent

    &::after
      bottom: 0
      height: 1px
      background: $decoration-color

    li
      float: left
      width: 25%

      @media (max-width: 770px)
        width: 33%

      @media (max-width: 590px)
        width: 50%

    // z-index to get on top of the -selector pseudoelement
    a
      position: relative
      z-index: 2
      display: block
      padding: 20px
      text-decoration: none
      color: $cream

      @media (max-width: 590px)
        padding: 10px
